from egz3atesty import runtests

def common(A,B):
    a=(max(A[0],B[0]),min(A[1],B[1]))
    if a[0]<=a[1]:
        return a
    return(0,-1)
def length(A):
    return A[1]-A[0]
def snow( I,T ):
    n=len(T)
    F=[[1,[]]for _ in range(n)]
    F[0]=[1,[T[0]]]
    for i in range(n):
        F[i]=[1,[T[i]]]
    for i in range(1,n):
        for k in range(i):
            # if len(F[k][1])>1:
            #     print(F[k][1])
            for j in range(len(F[k][1])):

                a=common(F[k][1][j],T[i])
                #print(F[k][1][j],T[i],a)
                if a!=(0,-1) and F[k][0]+1==F[i][0]:
                    F[i][1].append(a)
                elif a!=(0,-1) and F[k][0]+1>F[i][0]:
                    F[i][0]=F[k][0]+1
                    F[i][1]=[a]
                if F[k][0]==F[i][0]:
                    F[i][1].append(F[k][1][j])
                elif F[k][0]>F[i][0]:
                    F[i][0]=F[k][0]
                    F[i][1]=F[k][1]

    maxi=0
    for i in range(n):
        maxi=max(maxi,F[i][0])
    return maxi

def snow2(I,T):
    n=len(T)
    F=[0 for _ in range(I)]
    for i in range(n):
        for j in range(T[i][0],T[i][1]+1):
            F[j]+=1
    return max(F)



# zmien all_tests na True zeby uruchomic wszystkie testy
runtests( snow2, all_tests = True )
T = 1000
I = [(851, 856), (206, 745), 
     (375, 852), (58, 749), (936, 971), (161, 382), (479, 924), (29, 410), 
     (331, 672), (302, 953), (799, 956), (293, 306), (443, 472), (238, 409), 
     (204, 655), (202, 877), (264, 907), (22, 985), (52, 607), (141, 842), 
     (123, 272), (758, 809), (228, 231), (253, 658), (3, 208), (6, 985), (47, 884), 
     (130, 141), (427, 776), (110, 881), (836, 967), (61, 98), (35, 888), (406, 881), 
     (220, 855), (109, 514), (560, 835), (534, 937), (164, 943), (706, 941), (667, 856), 
     (697, 782), (172, 879), (253, 706), (371, 880), (14, 801), (780, 887), (538, 877), (291, 560), 
     (406, 681), (375, 668), (274, 301), (451, 624), (417, 990), (228, 471), (306, 733), (0, 283), (822, 913),
       (476, 671), (538, 701), (336, 771), (326, 793), (567, 756), (861, 866), (75, 272), (78, 841), (156, 831), 
       (861, 874), (379, 688), (385, 542), (319, 492), (634, 821), (0, 227), (481, 694), (23, 492), (53, 202), (523, 800),
         (153, 374), (60, 919), (101, 850), (203, 288), (78, 249), (295, 964), (133, 770), (131, 600), (374, 649), (236, 455), 
         (698, 837), (219, 264), (273, 790), (831, 956), (458, 669), (256, 883), (326, 553), (84, 911), (682, 829), (328, 835),
        (366, 409), (228, 839), (253, 970)]
#print(snow(T,I))